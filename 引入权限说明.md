##

#### ä¾§è¾¹èœå•æ ‘ç»“æ„

```js
/**
 * åˆ¤æ–­è·¯å¾„æ˜¯å¦æœ‰/ï¼Œ æ— åˆ™è¡¥ï¼›
 */
export function handleKeyPath(path) {
    if(path && path.indexOf('/') === 0) {
        return path
    }else {
        return '/' + path;
    }
}

let tree = {
    id: '0',
    childrenNode: []
};
{
    childrenNode: [],
    id: 'xxxx',
    parentId: '0', //çˆ¶èŠ‚ç‚¹
    otherLink: 'xxxx',
    resourceDesc: 'æè¿°', //èµ„æºæè¿°
    resourceName: 'åå­—', //èµ„æºåç§°
    resourceType: '1', // èµ„æºç±»åˆ«ï¼š1ï¼šç³»ç»Ÿï¼›2ï¼šèœå•ï¼›3ï¼šåŠŸèƒ½æˆ–è€…æ“ä½œ
    resourceCode: '0', //èµ„æºç¼–ç 
    resourceUrlï¼š '', //èµ„æºRUL
    sendMqFlag: false,
    sort: '000', //æ’åº
    sourceSys: 'IRC', // æ¬¡è¦
    sysDescContents: '', // æ¬¡è¦
}

/**
 * åˆ›å»ºæ ‡å‡†çš„æ ‘ç»“æ„
 */
export function createNode(node, menuKV, menu) {
    let ret = [];
    menu.forEach(item=>{
        if(ret[item.parentId]){
            ret[item.parentId].push(item);
        }else {
            ret[item.parentId] = item;
        }
        // åˆ¤æ–­æ¡ä»¶å¾…ä¼˜åŒ–
        if(item.resourceUrl) {
            menuKV[handleKeyPath(item.resourceUrl)] = {
                name: item.resourceName,
                id: id,
                pid: item.parentId,
            }
        }
        node.childrenNode = ret['0'] || [];
        node.childrenNode.forEach(child => {
            child.childrenNode = ret[child.id] || [];
            child.childrenNode.forEach(child2 => {
                child2.childrenNode = ret[child2.id] || [];
            })
        })
    });

}


// ç³»ç»ŸåŠ èœå•ï¼Œæœ€å¤šä¸‰å±‚ï¼›
// æ¯æ¬¡ç‚¹å‡»äºŒçº§èœå•ï¼Œè¯·æ±‚ä¸€ä¸‹getUserAccessibleResourceæ¥å£ï¼Œè¿”å›å½“å‰pageIdå¯¹åº”çš„åŠŸèƒ½æˆ–è€…æ“ä½œçš„accessible(å³resourceCodeæ•°ç»„)

// headerèœå•åº”è¯¥åŠ 
<div className='menu'>
    <Menu
        theme='dark'
        mode='horizontal'
        onSelect={this.menusClick}
        seletedKeys={[ROOT_menuId]}
    >
        {
            ROOT_menus.map(item=> {
                <Menu.Item
                    key={item.id}
                >
                    {item.resourceName}
                </Menu.Item>
            })
        }
    </Menu>
</div>
// Left.js åº”è¯¥åŠ 
// <Menu
//     mode='inline'
//     theme='dark'
//     inlineCollapsed={collapsed}
//     onSelect={this.onSelect}
//     onOpenChange={this.onOpenChange}
//     selectedKeys={ROOT_menuKey}
//     onpenKeys={ROOT_menuOpenKeys}
//     >
//     {
//         menus.map(item=>{
//             item.childrenNode && && item.childrenNode.length > 0 ? (
//                 <Menu.SubMenu
//                     key={item.id}
//                     title={<span>{
//                         collapsed && (<i className='action'>{
//                             getFirst(item.resourceName)}</i>)}
//                         }
//                         <span>{item.resourceName}</span>
//                     </span>}
//                 >
//             ) : ();
//         })
//     }

{item.childrenNode && item.childrenNode.map(listItem => {
    listItem.childrenNode && && listItem.childrenNode.length > 0 ? (
        <Menu.SubMenu
            key={listItem.id}
            title={listItem.resourceName}
        >
            listItem.childrenNode.map(llitem = >{
                <Menu.Item
                    key={handleKeyPath(listItem.resourceNameUrl)}
                    title={llitem.resourceName}
                    menuid={llitem.id}
                >
                    {llitem.resourceName}
                </Menu.Item>
            })
        </Menu.SubMenu>
    ) : (
        <Menu.Item
            key={handleKeyPath(listItem.resourceNameUrl)}
            title={llitem.resourceName}
            menuid={llitem.id}
        >
            {llitem.resourceName}
        </Menu.Item>
    )
})}


// èµ„æºç®¡ç†åˆ—è¡¨
// ä¿å­˜Tableåºå·
// ç»„è£…æ ‘å½¢ç»“æ„æ•°æ®
// table å¯å±•å¼€æ–¹å¼ï¼š children;
let sequence = 1;
export const getTreeData = (resourceList, isResetSeq) => {
    let resItems = [];
    // çœ‹æ¡ä»¶é‡ç½®ğŸ›
    if(isResetSeq) sequence = 1;
    resourceList.map(obj => {
        if(obj.parenId === '' || obj.parenId === '0') {
            let item = {...obj};
            item.sequence = sequence;
            sequence++;
            let children = findChild(resourceList, item.id);
            if(children && children.length > 0) {
                item.children = children;
            }
            resItems.push(item);
        }
    });
    return resItems;
}
function findChild(resourceList, id) {
    let child = [];
    resourceList.map(obj => {
        if(obj.parenId === id) {
            let item = {...obj};
            item.sequence = sequence;
            sequence++;
            let children = findChild(resourceList, item.id);
            if(children && children.length > 0) {
                item.children = children;
            }
            resItems.push(item);
        }
    });
    return child;
}
// èµ„æºç®¡ç†åˆ—è¡¨--å¼¹æ¡†--ç¼–è¾‘æ¡†ï¼š 7ä¸ªå­—æ®µï¼šçˆ¶èŠ‚ç‚¹åç§° èµ„æºåç§° èµ„æºç±»åˆ« èµ„æºç¼–ç  èµ„æºRUL æ’åº æè¿°

// ä¸‰åˆ—è¡¨å­—æ®µè¯´æ˜
// ç”¨æˆ·ç®¡ç†åˆ—è¡¨ï¼š åºå·ï¼Œç”¨æˆ·åï¼Œä¸­æ–‡åå­—ï¼Œéƒ¨é—¨ï¼Œå·²æ‹¥æœ‰è§’è‰²ï¼Œæ‰‹æœºå·ç ï¼Œæ˜¯å¦æœ‰æ•ˆ
// è§’è‰²ç®¡ç†åˆ—è¡¨ï¼š è§’è‰²åï¼Œè§’è‰²æè¿°ï¼Œæ˜¯å¦æœ‰æ•ˆ
// èµ„æºç®¡ç†åˆ—è¡¨ï¼š èµ„æºåç§° èµ„æºç±»åˆ« èµ„æºç¼–ç  èµ„æºRUL æ’åº æè¿°
// æ•°æ®åº“ï¼šç”¨æˆ·è¡¨å’Œè§’è‰²è¡¨çš„å…³ç³»ç”¨ç¬¬ä¸‰å¼ è¡¨æ¥è¡¨ç¤ºï¼šå¤šå¯¹å¤šçš„å…³ç³»ã€‚ è§’è‰²ä¸èµ„æºç®¡ç†åŒç†ã€‚æ•°æ®åº“è¡¨åå­—å¤§å†™ï¼šABC_DEFG

// èµ„æºå¼¹æ¡†æ ‘
// ç»™è§’è‰²åˆ†é…èµ„æºæ˜¯ä¼ è§’è‰²å’Œèµ„æºå„è‡ªçš„id
<Modal
    title='åˆ†é…èµ„æº'
    visible={showTree}
    onOk={()=>this.save()}
    onCancel={() => this.setState({showTree: false})}
    width='800px'
    bodyStyle={{height: '480px', overflow: 'scroll'}}
    maskClosable={false}
    destoryOnClose={true}
>
    <div><span style={{color: 'red'}}>{roleName}</span>è§’è‰²ä¸‹çš„èµ„æºï¼š</div>
    <Tree
        checkable
        onCheck={this.onCheck}
        checkedKeys={checkedKeys}
    >
        {this.renderTreeNodes(treeData)}
    </Tree>
</Modal>

renderTreeNodes = data => 
    data.map(item => {
        if(item.children) {
            return (
                <TreeNode
                    title={item.resourceName || item.permissionName}
                    key={item.id}
                    dataRef={item}
                >
                    {this.renderTreeNodes(item.children)}
                </TreeNode>
            )
        }
        return (
            <TreeNode
                {...item}
                title={item.resourceName || item.permissionName}
                key={item.id}
                dataRef={item}
            >
                {this.renderTreeNodes(item.children)}
            </TreeNode>
        );
    });

// ç»™ç”¨æˆ·åˆ†é…è§’è‰²çš„å¼¹æ¡†: ä¸€ä¸ªmodal åŒ…å«ä¸¤ä¸ªtable
// ç»™ç”¨æˆ·åˆ†é…è§’è‰²ä¹Ÿæ˜¯ä¼ å„è‡ªçš„id
<div>
    <Table
        rowKey='id'
        bordered={true}
        rowSelection={{
            selectedRowKeys: leftSelectedRowKeys,
            onChange: (rowKeys, selectedRows) => {

            }
        }}
        columns={roleColumns}
        dataSource={differenceRole}
        pagination={false}
        size='small'
        scroll={{yï¼š 290}}
        title='ä¸ºæ·»åŠ è§’è‰²'
    />
    <div
        style={{
            display: 'flex',
            flexDirection: 'column',
            alignSelf: 'center',
        }}
    >
        <Button>æ–°å¢<Button>
        <Button>åˆ é™¤<Button>
    </div>
    <Table/>
</div>


```
